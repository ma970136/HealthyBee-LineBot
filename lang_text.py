# lang_text.py

# è¯­è¨€ç¼–å·æ˜ å°„
LANG_ID = {
    1: "zh-CN",  # ç®€ä½“ä¸­æ–‡
    2: "zh-TW",  # ç¹é«”ä¸­æ–‡
    3: "en",     # English
    4: "ja"      # æ—¥æœ¬èª
}

# æ–‡æ¡ˆä¸»æ–‡æœ¬åº“
TEXT_GROUP = {
    # ğŸŸ¦ æ¬¢è¿
    "welcome": {
        1: "æ¬¢è¿ä½¿ç”¨HealthyBeeï¼",
        2: "æ­¡è¿ä½¿ç”¨HealthyBeeï¼",
        3: "Welcome to HealthyBee!",
        4: "HealthyBee ã¸ã‚ˆã†ã“ãï¼"
    },

    "set_lang_success": {
        1: "âœ… è¯­è¨€è®¾ç½®æˆåŠŸï¼šç®€ä½“ä¸­æ–‡",
        2: "âœ… èªè¨€è¨­ç½®æˆåŠŸï¼šç¹é«”ä¸­æ–‡",
        3: "âœ… Language set to English",
        4: "âœ… è¨€èªã¯æ—¥æœ¬èªã«è¨­å®šã•ã‚Œã¾ã—ãŸã€‚"
    },

    "help": {
        1: "æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼š\n1. æŸ¥è¯¢å¿ƒç‡\n2. æ¯æ—¥æ­¥æ•°\n3. æ¯æ—¥æ¶ˆè€—å¡è·¯é‡Œ\n4. é€‰æ‹©è¯­è¨€",  # ç®€ä½“ä¸­æ–‡
        2: "æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼š\n1. æŸ¥è©¢å¿ƒç‡\n2. æ¯æ—¥æ­¥æ•¸\n3. æ¯æ—¥æ¶ˆè€—å¡è·¯é‡Œ\n4. é¸æ“‡èªè¨€",  # ç¹é«”ä¸­æ–‡
        3: "You can use the following commands:\n1. Get Heart Rate Data\n2. Daily Steps\n3. Daily Calories\n4. Choose Language",  # English
        4: "æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆã¾ã™ï¼š\n1. å¿ƒæ‹æ•°ã®ç¢ºèª\n2. æ—¥ã€…ã®æ­©æ•°\n3. æ—¥ã€…ã®æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼\n4. è¨€èªé¸æŠ",  # æ—¥æœ¬èª
    },
    
    "get_heartrate":{
        1: "æŸ¥è¯¢å¿ƒç‡",
        2: "æŸ¥è©¢å¿ƒç‡",
        3: "Get Heart Rate Data",
        4: "å¿ƒæ‹æ•°ã®ç¢ºèª"
    },
    
    "get_steps":{
        1: "æ¯æ—¥æ­¥æ•°",
        2: "æ¯æ—¥æ­¥æ•¸",
        3: "Daily Steps",
        4: "æ—¥ã€…ã®æ­©æ•°"
    },
    
    "get_calories":{
        1: "æ¯æ—¥æ¶ˆè€—å¡è·¯é‡Œ",
        2: "æ¯æ—¥æ¶ˆè€—å¡è·¯é‡Œ",
        3: "Daily Calories",
        4: "æ—¥ã€…ã®æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼"
    },

    "choose_language":{
        1: "é€‰æ‹©è¯­è¨€",
        2: "é¸æ“‡èªè¨€",
        3: "Choose Language",
        4: "è¨€èªé¸æŠ"
    },
    "bp_prefix": {
        1: "ğŸ“Š æœ€æ–°æµ‹é‡åˆ°çš„å¿ƒç‡å€¼æ˜¯ï¼š",
        2: "ğŸ“Š æœ€æ–°æ¸¬é‡åˆ°çš„å¿ƒç‡å€¼æ˜¯ï¼š",
        3: "ğŸ“Š The latest heart rate reading is:",
        4: "ğŸ“Š æœ€æ–°ã®å¿ƒæ‹æ•°æ¸¬å®šå€¤ã¯ï¼š"
    },
    # é€šç”¨ - æœªçŸ¥å‘½ä»¤
    "unknown_command": {
        1: "â“ æŠ±æ­‰ï¼Œæˆ‘ä¸ç†è§£æ‚¨çš„æŒ‡ä»¤ã€‚",
        2: "â“ æŠ±æ­‰ï¼Œæˆ‘ç„¡æ³•ç†è§£æ‚¨çš„æŒ‡ä»¤ã€‚",
        3: "â“ Sorry, I didn't understand your command.",
        4: "â“ ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚³ãƒãƒ³ãƒ‰ã‚’ç†è§£ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚"
    },

    # ç³»ç»Ÿé”™è¯¯
    "server_error": {
        1: "âš ï¸ ç³»ç»Ÿå‡ºç°äº†ä¸€ç‚¹å°é—®é¢˜ï¼Œè¯·ç¨åå†è¯•ã€‚",
        2: "âš ï¸ ç³»çµ±å‡ºç¾äº†ä¸€é»å°å•é¡Œï¼Œè«‹ç¨å¾Œå†è©¦ã€‚",
        3: "âš ï¸ Oops! Something went wrong. Please try again later.",
        4: "âš ï¸ ã‚·ã‚¹ãƒ†ãƒ ã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãã—ã¦ã‹ã‚‰ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚"
    },

    # è®¾ç½®æé†’
    "reminder_set": {
        1: "ğŸ”” å·²ä¸ºæ‚¨è®¾ç½®æé†’ã€‚",
        2: "ğŸ”” å·²ç‚ºæ‚¨è¨­å®šæé†’ã€‚",
        3: "ğŸ”” Reminder has been set.",
        4: "ğŸ”” ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’è¨­å®šã—ã¾ã—ãŸã€‚"
    },

    # å–æ¶ˆæé†’
    "reminder_cancel": {
        1: "ğŸ”• å·²å–æ¶ˆæé†’ã€‚",
        2: "ğŸ”• å·²å–æ¶ˆæé†’ã€‚",
        3: "ğŸ”• Reminder has been canceled.",
        4: "ğŸ”• ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã—ãŸã€‚"
    },

    # æé†’æ—¶é—´åˆ°
    "reminder_upcoming": {
        1: "â° æé†’æ—¶é—´åˆ°äº†ï¼Œè¯·æ³¨æ„æŸ¥çœ‹ã€‚",
        2: "â° æé†’æ™‚é–“åˆ°äº†ï¼Œè«‹æ³¨æ„æŸ¥çœ‹ã€‚",
        3: "â° It's time! Please check.",
        4: "â° ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã®æ™‚é–“ã§ã™ã€‚ã”ç¢ºèªãã ã•ã„ã€‚"
    },

    # æé†’å·²è¿‡æœŸ
    "reminder_missed": {
        1: "âš ï¸ æ‚¨é”™è¿‡äº†ä¸€ä¸ªæé†’ã€‚",
        2: "âš ï¸ æ‚¨éŒ¯éäº†ä¸€å€‹æé†’ã€‚",
        3: "âš ï¸ You missed a reminder.",
        4: "âš ï¸ ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’é€ƒã—ã¾ã—ãŸã€‚"
    },

    # æ²¡æœ‰å†å²è®°å½•
    "history_empty": {
        1: "æš‚æ— å†å²è®°å½•ã€‚",
        2: "æš«ç„¡æ­·å²è¨˜éŒ„ã€‚",
        3: "No history available.",
        4: "å±¥æ­´ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚"
    },

    # å†å²è®°å½•å•é¡¹æ¨¡æ¿ï¼ˆå¦‚: æ—¶é—´ + å€¼ï¼‰
    "history_item": {
        1: "ğŸ“… {time} - è¡€å‹ï¼š{value}",
        2: "ğŸ“… {time} - è¡€å£“ï¼š{value}",
        3: "ğŸ“… {time} - BP: {value}",
        4: "ğŸ“… {time} - è¡€åœ§: {value}"
    },

    # å»ºè®®å°±åŒ»
    "suggest_checkup": {
        1: "ğŸ’¡ å¦‚æœä¸é€‚æŒç»­ï¼Œè¯·åŠæ—¶å‰å¾€åŒ»é™¢è¿›è¡Œæ›´è¯¦ç»†çš„æ£€æŸ¥ã€‚",
        2: "ğŸ’¡ å¦‚æœä¸é©æŒçºŒï¼Œè«‹åŠæ™‚å‰å¾€é†«é™¢é€²è¡Œæ›´è©³ç´°çš„æª¢æŸ¥ã€‚",
        3: "ğŸ’¡ If you feel unwell, please visit a hospital for a detailed checkup.",
        4: "ğŸ’¡ ä½“èª¿ãŒå„ªã‚Œãªã„å ´åˆã¯ã€ç—…é™¢ã§è©³ã—ãæ¤œæŸ»ã‚’å—ã‘ã¦ãã ã•ã„ã€‚"
    },

    # å·²æ˜¯æœ€æ–°æ•°æ®
    "already_latest": {
        1: "âœ… å½“å‰å·²æ˜¯æœ€æ–°æ•°æ®ï¼Œæ— éœ€æ›´æ–°ã€‚",
        2: "âœ… ç›®å‰å·²æ˜¯æœ€æ–°è³‡æ–™ï¼Œç„¡éœ€æ›´æ–°ã€‚",
        3: "âœ… This is the latest data, no update needed.",
        4: "âœ… ã“ã‚ŒãŒæœ€æ–°ã®ãƒ‡ãƒ¼ã‚¿ã§ã™ã€‚æ›´æ–°ã¯ä¸è¦ã§ã™ã€‚"
    },

    # åˆ‡æ¢è¯­è¨€æç¤º
    "change_lang": {
        1: "ğŸŒ æ‚¨å¯ä»¥è¾“å…¥æ•°å­— 1~4 æ¥é€‰æ‹©æ–°çš„è¯­è¨€ã€‚",
        2: "ğŸŒ æ‚¨å¯ä»¥è¼¸å…¥æ•¸å­— 1~4 ä¾†é¸æ“‡æ–°çš„èªè¨€ã€‚",
        3: "ğŸŒ You can enter a number (1~4) to select a new language.",
        4: "ğŸŒ æ•°å­— 1ã€œ4 ã‚’å…¥åŠ›ã—ã¦æ–°ã—ã„è¨€èªã‚’é¸æŠã§ãã¾ã™ã€‚"
    },

    # æ˜¯/å¦
    "confirm_yes": {
        1: "æ˜¯",
        2: "æ˜¯",
        3: "Yes",
        4: "ã¯ã„"
    },
    "confirm_no": {
        1: "å¦",
        2: "å¦",
        3: "No",
        4: "ã„ã„ãˆ"
    },
    # ğŸŸ¨ å¡è·¯é‡Œæ–‡æ¡ˆ
    "æ¶ˆè€—äº†": {
        1: "æ¶ˆè€—äº†",   # ç®€ä½“ä¸­æ–‡
        2: "æ¶ˆè€—äº†",   # ç¹é«”ä¸­æ–‡
        3: "burned",   # English
        4: "æ¶ˆè²»ã—ãŸ"  # æ—¥æœ¬èª
    },

    "cal": {
        1: "å¡è·¯é‡Œ",  # ç®€ä½“ä¸­æ–‡
        2: "å¡è·¯é‡Œ",  # ç¹é«”ä¸­æ–‡
        3: "cal",     # English
        4: "ã‚«ãƒ­ãƒªãƒ¼"  # æ—¥æœ¬èª
    },
    # ğŸŸ© æ­¥æ•°ç›¸å…³æ–‡æ¡ˆ
    "èµ°äº†": {
        1: "èµ°äº†",        # ç®€ä½“ä¸­æ–‡
        2: "èµ°äº†",        # ç¹é«”ä¸­æ–‡
        3: "walked",      # è‹±æ–‡
        4: "æ­©ã„ãŸ"       # æ—¥æœ¬èª
    },
    "æ­¥": {
        1: "æ­¥",          # ç®€ä½“ä¸­æ–‡
        2: "æ­¥",          # ç¹é«”ä¸­æ–‡
        3: "steps",       # è‹±æ–‡
        4: "æ­©"           # æ—¥æœ¬èª
    },
    # æ—©å®‰
    "greeting_morning": {
        1: "ğŸŒ… æ—©å®‰ï¼ç¥æ‚¨ä¸€å¤©å¥½å¿ƒæƒ…ï½",
        2: "ğŸŒ… æ—©å®‰ï¼ç¥æ‚¨ä¸€å¤©å¥½å¿ƒæƒ…ï½",
        3: "ğŸŒ… Good morning! Have a nice day!",
        4: "ğŸŒ… ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ï¼è‰¯ã„ä¸€æ—¥ã‚’ï¼"
    },

    # æ™šå®‰
    "greeting_evening": {
        1: "ğŸŒ™ æ™šå®‰ï¼è®°å¾—å¥½å¥½ä¼‘æ¯ã€‚",
        2: "ğŸŒ™ æ™šå®‰ï¼è¨˜å¾—å¥½å¥½ä¼‘æ¯ã€‚",
        3: "ğŸŒ™ Good night! Have a restful sleep.",
        4: "ğŸŒ™ ãŠã‚„ã™ã¿ãªã•ã„ï¼ã‚†ã£ãã‚Šä¼‘ã‚“ã§ãã ã•ã„ã€‚"
    }

}

# âœ… æ–‡æœ¬è·å–å‡½æ•°
def get_text(key: str, lang_id: int) -> str:
    return TEXT_GROUP.get(key, {}).get(lang_id, "[âš ï¸ æ–‡æœ¬ç¼ºå¤±]")

# âœ… è¡€å‹æ–‡æ¡ˆç»„åˆå‡½æ•°
def format_bp_message(lang_id: int, value_str: str, level: str) -> str:
    """
    å‚æ•°:
        lang_id: è¯­è¨€ç¼–å· (1~4)
        value_str: ä¾‹å¦‚ "135/88 mmHg"
        level: å¯é€‰ "normal" / "high"
    """
    prefix = get_text("bp_prefix", lang_id)
    body = get_text(f"bp_{level}", lang_id)
    return f"{prefix} {value_str}\n{body}"

# âœ… æ­¥æ•¸æ–‡æ¡ˆç»„åˆå‡½æ•°
def format_steps_message(lang_id: int, dates: list, steps: list) -> str:
    """
    ç”Ÿæˆä¸ƒå¤©æ­¥æ•¸æŸ¥è©¢çµæœ
    å‚æ•°:
        lang_id: è¯­è¨€ç¼–å· (1~4)
        dates: æ—¥æœŸåˆ—è¡¨ï¼Œä¾‹å¦‚ ["2025-07-07", "2025-07-06", ...]
        steps: æ­¥æ•¸åˆ—è¡¨ï¼Œä¾‹å¦‚ [0, 0, 20, 0, 0, 40]
    
    è¿”å›:
        è¿”å›å®Œæ•´çš„æ­¥æ•¸æŸ¥è©¢è¨Šæ¯ï¼ŒåŒ…å«ç¿»è­¯å¾Œçš„æ–‡å­—
    """
    result = ""
    
    # ç¿»è­¯ "èµ°äº†" å’Œ "æ­¥" å…©å€‹å­—
    walked_text = get_text("èµ°äº†", lang_id)  # é€™è£¡æœƒæ ¹æ“šèªè¨€è¿”å› "èµ°äº†"ã€"æ­©ã„ãŸ"ã€"walked"
    step_text = get_text("æ­¥", lang_id)      # é€™è£¡æœƒæ ¹æ“šèªè¨€è¿”å› "æ­¥"ã€"æ­©"ã€"steps"
    
    # è¿´åœˆçµ„åˆçµæœ
    for date, step in zip(dates, steps):
        result += f"{date} {walked_text} {step} {step_text}\n"
    
    return result.strip()  # å»é™¤æœ€å¾Œçš„æ›è¡Œç¬¦

# âœ… å¡è·¯é‡Œæ–‡æ¡ˆç»„åˆå‡½æ•°
def format_calories_message(lang_id: int, dates: list, calories: list) -> str:
    """
    æ ¼å¼åŒ–å¡è·¯é‡Œæ¶ˆè€—è¨Šæ¯ï¼Œä¸¦æ ¹æ“šèªè¨€ ID è¿”å›å°æ‡‰çš„æ¶ˆæ¯
    å‚æ•°:
        lang_id: è¯­è¨€ç¼–å· (1~4)
        dates: æ—¥æœŸåˆ—è¡¨ï¼Œä¾‹å¦‚ ["2025-07-07", "2025-07-06", ...]
        calories: å¡è·¯é‡Œæ¶ˆè€—åˆ—è¡¨ï¼Œä¾‹å¦‚ [0, 0, 20, 0, 0, 40]
    
    è¿”å›:
        è¿”å›å®Œæ•´çš„å¡è·¯é‡Œæ¶ˆè€—æŸ¥è©¢è¨Šæ¯ï¼ŒåŒ…å«ç¿»è­¯å¾Œçš„æ–‡å­—
    """
    result = ""
    
    # ç¿»è­¯ "æ¶ˆè€—äº†" å’Œ "cal" å…©å€‹å­—
    burned_text = get_text("æ¶ˆè€—äº†", lang_id)  # æ ¹æ“šèªè¨€IDç¿»è­¯â€œæ¶ˆè€—äº†â€
    # calorie_text = get_text("cal", lang_id)    # æ ¹æ“šèªè¨€IDç¿»è­¯â€œcalâ€
    calorie_text = "cal"
    # çµ„åˆæ­¥æ•¸ä¿¡æ¯
    for date, calorie in zip(dates, calories):
        result += f"{date} {burned_text} {calorie} {calorie_text}\n"
    
    return result.strip()  # è¿”å›æ ¼å¼åŒ–å¾Œçš„çµæœ

# âœ… æ£€æŸ¥æ˜¯å¦ç¼ºå¤±æŸè¯­è¨€çš„æ–‡æ¡ˆ
def check_missing_lang_keys():
    for key, values in TEXT_GROUP.items():
        for lang_num in LANG_ID:
            if lang_num not in values:
                print(f"[ç¼ºå¤±] æ–‡æ¡ˆâ€œ{key}â€ç¼ºå°‘è¯­è¨€ {LANG_ID[lang_num]}ï¼ˆlang_id={lang_num}ï¼‰")